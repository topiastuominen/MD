<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mighty Ducks - Event Management</title>
    <link rel="stylesheet" href="layout.css" />
  </head>
  <body>
    <header>
      <h1>Team Building Day</h1>
    </header>

    <div class="container">
      <form id="signupForm">
        <div class="column">
          <h2>Personal Information</h2>

          <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" />
          </div>
        </div>

        <div class="form-group">
          <label for="phone">Phone: </label>
          <input type="tel" id="phone" name="phone" />
        </div>

        <div class="form-group">
          <label for="email">Email:</label>
          <input type="email" id="email" name="email" />
        </div>

        <div class="form-group">
          <label for="participation">Participation:</label>
          <select id="participation" name="participation">
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </div>

        <div class="form-group">
          <label for="group-activity">
            How would you like to participate in team-building activities?
          </label>
          <select id="group-activity" name="group-activity">
            <option value="" disabled selected>Select an option</option>
            <option value="meet_new_people">Networking</option>
            <option value="teamwork">Participating in teamwork</option>
            <option value="organizing">Organizing</option>
            <option value="specific_activity">
              I want to join a specific activity
            </option>
          </select>
        </div>

        <div class="form-group">
          <label for="strengths">What are your interests/strengths?</label>
          <select id="strengths" name="strengths">
            <option value="" disabled selected>Select an option</option>
            <option value="leadership">Leadership</option>
            <option value="creative_thinking">Creative Thinking</option>
            <option value="communication_skills">
              Improving communication skills
            </option>
            <option value="outdoor_activities">Outdoor activities</option>
          </select>
        </div>

        <div class="form-group">
          <label for="assistance"
            >Would you like to help with arrangements?</label
          >
          <select id="assistance" name="assistance">
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>
        </div>

        <div class="form-group">
          <button type="submit">Submit</button>
        </div>

        <div id="responseMsg"></div>
      </form>
    </div>

    <script>
      document
        .getElementById("signupForm")
        .addEventListener("submit", async function (e) {
          e.preventDefault();

          const data = {
            name: document.getElementById("name").value.trim(),
            phone: document.getElementById("phone").value.trim(),
            email: document.getElementById("email").value.trim(),
            participation: document.getElementById("participation").value,
            groupActivity: document.getElementById("group-activity").value,
            strengths: document.getElementById("strengths").value,
            assistance: document.getElementById("assistance").value,
          };

          // Simple validation example
          if (!data.name || !data.email) {
            alert("Please fill out your name and email.");
            return;
          }

          try {
            const response = await fetch("http://localhost:3000/submit", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify(data),
            });

            if (response.ok) {
              document.getElementById("responseMsg").textContent =
                "✅ Your information has been saved!";
              setTimeout(() => {
                window.location.href = "tapahtumat.html";
              }, 1500);
            } else {
              document.getElementById("responseMsg").textContent =
                "❌ Error saving your info.";
            }
          } catch (error) {
            console.error(error);
            document.getElementById("responseMsg").textContent =
              "❌ Could not connect to server.";
          }
        });
    </script>
  </body>
</html>
